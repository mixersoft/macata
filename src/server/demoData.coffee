# /server/demoData.js
# coffeelint: disable=max_line_length
demoData = {
  'mcRecipes': [{"url":"http://www.yummly.com/recipe/Thomas-Keller_s-Roast-Chicken-1286231","title":"Thomas Keller's Roast Chicken Recipe","description":"Thomas Keller's Roast Chicken Recipe Main Dishes with chicken, ground black pepper, salt, orange, lemon, carrots, onions, celery ribs, shallots, bay leaves, thyme sprigs, butter","image":"http://lh3.googleusercontent.com/h9IttHblN8tuFyHG-A4cDhqzYPNB-yM4jyT2fIgLFxg6lcxKdKCSqPyCz_c5pk0eCS3JLUPXjo2M7CU4pVsWog=s730-e365","site_name":"Yummly","extras":{"fb:admins":"202900140,632263878,500721039,521616638,553471374,3417349,678870357,506741635","fb:app_id":"54208124338","og:type":"yummlyfood:recipe","yummlyfood:course":"Main Dishes","yummlyfood:ingredients":"butter","yummlyfood:time":"1 hr 30 min","yummlyfood:source":"TLC"},"id":"0","location":{"lat":42.6700528,"lon":23.314167099999963},"className":"Recipe","createdAt":"2016-02-29T15:58:41.849Z","$$owner":{"firstname":"Masie","lastname":"May","username":"maymay","displayName":"maymay","face":"https://unsplash.it/200/200/?image=793","id":"0","className":"Users"},"ownerId":"0","$$hashKey":"object:87"},{"url":"http://www.yummly.com/recipe/Spice-Crusted-Carrots-with-Harissa-Yogurt-1054422","title":"Spice-Crusted Carrots with Harissa Yogurt Recipe","description":"Spice-Crusted Carrots with Harissa Yogurt Recipe with carrots, kosher salt, sugar, mustard powder, spanish paprika, ground cumin, ground coriander, vegetable oil, ground black pepper, plain greek yogurt, harissa paste, chopped fresh thyme, grated lemon zest, lemon wedge","image":"http://lh3.googleusercontent.com/Psf5ZDTw2hgQNDOjI0ZtwYqiDWHbeXzMrJALdVSMNhdtedpq5IfQvy_sVZLLuN3tuQIUVkBqkl8LS4I6gDgsm_o=s730-e365","site_name":"Yummly","extras":{"fb:admins":"202900140,632263878,500721039,521616638,553471374,3417349,678870357,506741635","fb:app_id":"54208124338","og:type":"yummlyfood:recipe","yummlyfood:ingredients":"lemon wedge","yummlyfood:time":"45 min","yummlyfood:source":"Bon Appétit"},"id":"1","location":{"lat":42.6737483,"lon":23.325192799999968},"className":"Recipe","createdAt":"2016-02-28T15:58:41.849Z","$$owner":{"firstname":"Marky","lastname":"Mark","username":"marky","displayName":"marky","face":"https://unsplash.it/200/200/?image=804","id":"1","className":"Users"},"ownerId":"1","$$hashKey":"object:88"},{"url":"http://newyork.seriouseats.com/2013/09/how-betony-makes-their-short-ribs.html","title":"How Betony Makes Their Short Ribs","description":"It's rare that a restaurant opening in Midtown causes much of a stir, but with Chef Bryce Shuman—the former executive Sous Chef of Eleven Madison Park—at the helm, it's no surprise that Betony is making waves. This short rib dish is one of those wave-makers.","image":"http://newyork.seriouseats.com/assets_c/2013/08/20130826-264197-behind-the-scenes-betony-short-ribs-29-thumb-625xauto-348442.jpg","extras":{},"id":"2","location":{"lat":42.6977082,"lon":23.321867500000053},"className":"Recipe","createdAt":"2016-02-27T15:58:41.849Z","$$owner":{"firstname":"Lucy","lastname":"Lu","username":"lulu","displayName":"lulu","face":"https://unsplash.it/200/200/?image=815","id":"2","className":"Users"},"ownerId":"2","$$hashKey":"object:89"},{"url":"http://www.bonappetit.com/recipe/red-wine-braised-short-ribs","title":"Red Wine-Braised Short Ribs Recipe - Bon Appétit","description":"These Red Wine-Braised Short Ribs are even better when they're allowed to sit overnight.","image":"http://www.bonappetit.com/wp-content/uploads/2011/08/red-wine-braised-short-ribs-940x560.jpg","site_name":"Bon Appétit","extras":{"og:locale":"en_US","og:type":"recipe","article:publisher":"https://www.facebook.com/bonappetitmag","article:tag":"Beef,Dinner,Meat,Ribs","article:section":"Recipes","type":"recipe"},"id":"3","location":{"lat":42.6599319,"lon":23.31657610000002},"className":"Recipe","createdAt":"2016-02-26T15:58:41.851Z","$$owner":{"firstname":"Chucky","lastname":"Chu","username":"chuchu","displayName":"chuchu","face":"https://unsplash.it/200/200/?image=826","id":"3","className":"Users"},"ownerId":"3","$$hashKey":"object:90"},{"url":"http://www.yummly.com/recipe/My-classic-caesar-318835","title":"My Classic Caesar Recipe","description":"My Classic Caesar Recipe Salads with garlic, anchovy filets, sea salt flakes, egg yolks, lemon, extra-virgin olive oil, country bread, garlic, extra-virgin olive oil, sea salt, romaine lettuce, caesar salad dressing, parmagiano reggiano, ground black pepper, anchovies","image":"http://lh3.ggpht.com/J8bTX6MuGC-8y87DHlxxagqShmJLlPjXff28hN8gksOpLp3fZJ5XaLCGrkZLYMer3YlNAEoOfl6FyrSsl9uGcw=s730-e365","site_name":"Yummly","extras":{"fb:admins":"202900140,632263878,500721039,521616638,553471374,3417349,678870357,506741635","fb:app_id":"54208124338","og:type":"yummlyfood:recipe","yummlyfood:course":"Salads","yummlyfood:ingredients":"anchovies","yummlyfood:time":"40 min","yummlyfood:source":"Food52"},"id":"4","location":{"lat":42.6743583,"lon":23.32824210000001},"className":"Recipe","createdAt":"2016-02-25T15:58:41.851Z","$$owner":{"firstname":"Masie","lastname":"May","username":"maymay","displayName":"maymay","face":"https://unsplash.it/200/200/?image=793","id":"0","className":"Users"},"ownerId":"0","$$hashKey":"object:91"},{"url":"http://www.yummly.com/recipe/Pan-roasted-brussel-sprouts-316203","title":"Pan Roasted Brussel Sprouts Recipe","description":"Pan Roasted Brussel Sprouts Recipe Side Dishes with brussels sprouts, olive oil, garlic cloves, white wine, cracked black pepper, sea salt, extra-virgin olive oil","image":"http://lh3.ggpht.com/__CrxYT6M2LxtItnVSkYQ7u2k-p59E8zryHmLFioy4d5oZj04pkSc88aVpLcjey19YaWUwnnM-TfhtoK4U3jXFQ=s730-e365","site_name":"Yummly","extras":{"fb:admins":"202900140,632263878,500721039,521616638,553471374,3417349,678870357,506741635","fb:app_id":"54208124338","og:type":"yummlyfood:recipe","yummlyfood:course":"Side Dishes","yummlyfood:ingredients":"extra-virgin olive oil","yummlyfood:time":"35 min","yummlyfood:source":"Food52"},"id":"5","location":{"lat":42.680284,"lon":23.325271},"className":"Recipe","createdAt":"2016-02-24T15:58:41.851Z","$$owner":{"firstname":"Marky","lastname":"Mark","username":"marky","displayName":"marky","face":"https://unsplash.it/200/200/?image=804","id":"1","className":"Users"},"ownerId":"1","$$hashKey":"object:92"},{"url":"http://whitestorkco.com/","title":"White Stork","image":"https://pbs.twimg.com/profile_images/691694111468945408/H8VRdkNg.jpg","description":"At White Stork, we are passionate about taste and the need to have more good beer in Bulgaria. After extensive research, testing, tasting, tweaking and experimentation since 2011, we hatched our first Pale Ale in December 2013 and wanted to show you the wonders of the Citra hop in our Summer Pale Ale in July 2014. Although our beers are currently made by our amazing master brewer in Belgium, we are building our brewery in Sofia which will hopefully be operational soon.","id":"6","location":{"lat":42.6945039,"lon":23.340166},"className":"Recipe","createdAt":"2016-02-23T15:58:41.851Z","$$owner":{"firstname":"Lucy","lastname":"Lu","username":"lulu","displayName":"lulu","face":"https://unsplash.it/200/200/?image=815","id":"2","className":"Users"},"ownerId":"2","$$hashKey":"object:93"}]
}
# coffeelint: enable=max_line_length
loadData = ()->
  context = @
  count = {}
  _.each demoData, (data, collection)->
    count[collection] = context[collection]?.find().count()
    if count[collection]==0
      console.log ['loading demoData for ', collection]
      data.forEach (o)->
        omitKeys = _.filter(_.keys(o), (k)->return k[0]=='$')
        clean = _.omit o, omitKeys
        console.log ["clean keys=", _.keys(clean).join() ]
        context[collection].insert(clean)
      count[collection] = context[collection].find().count()

  console.log ["demoData count=", count]

Meteor.startup loadData
